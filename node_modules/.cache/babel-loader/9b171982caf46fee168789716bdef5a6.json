{"ast":null,"code":"import _regeneratorRuntime from \"/Users/naveed.baqai/private/arnold-clark/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/naveed.baqai/private/arnold-clark/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/naveed.baqai/private/arnold-clark/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/naveed.baqai/private/arnold-clark/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/naveed.baqai/private/arnold-clark/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/naveed.baqai/private/arnold-clark/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/naveed.baqai/private/arnold-clark/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/naveed.baqai/private/arnold-clark/src/components/interestFreeCars/affordableCars/affordableCars.js\";\nimport React, { Component } from 'react';\nimport { Button } from 'react-bootstrap';\nimport Loader from 'react-loader-spinner';\nimport { monthlyRepayment } from './../commonFunctions.js';\nimport searchCarsByMonthlyPayments from '../../../services/searchCarsByMonthlyPayments';\nimport missingCarIcon from './../../../assets/car-icon.png';\nimport './affordableCars.scss';\n\nvar AffordableCars =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AffordableCars, _Component);\n\n  function AffordableCars(props) {\n    var _this;\n\n    _classCallCheck(this, AffordableCars);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AffordableCars).call(this, props));\n\n    _this.componentWillReceiveProps = function (newProps) {\n      var repayment = monthlyRepayment(newProps.price, newProps.deposit, newProps.years);\n\n      _this.searchingCar(repayment);\n    };\n\n    _this.searchingCar =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(price) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.setState({\n                  loading: true,\n                  sentRequest: true\n                });\n\n                _context.prev = 1;\n                _context.next = 4;\n                return searchCarsByMonthlyPayments(price).then(function (response) {\n                  _this.setState({\n                    data: response\n                  });\n\n                  _this.setState({\n                    loading: false\n                  });\n                });\n\n              case 4:\n                _context.next = 9;\n                break;\n\n              case 6:\n                _context.prev = 6;\n                _context.t0 = _context[\"catch\"](1);\n\n                _this.setState({\n                  loading: false\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 6]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.state = {\n      loading: false,\n      sentRequest: false,\n      data: {\n        searchResults: []\n      }\n    };\n    return _this;\n  }\n\n  _createClass(AffordableCars, [{\n    key: \"render\",\n    value: function render() {\n      var filteredCars = this.state.data.searchResults.filter(function (item) {\n        return item.isReserved === false;\n      });\n      var carResults = React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, filteredCars.slice(0, 6).map(function (item, index) {\n        return React.createElement(\"div\", {\n          key: index,\n          className: \"col-lg-4\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"card\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }, item.photos.length > 0 ? React.createElement(\"img\", {\n          className: \"card-img-top\",\n          src: item.photos[0],\n          alt: \"Car\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        }) : React.createElement(\"img\", {\n          className: \"card-img-top\",\n          src: missingCarIcon,\n          alt: \"Car\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"card-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        }, React.createElement(\"h5\", {\n          className: \"card-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, item.title.name), React.createElement(\"ul\", {\n          className: \"card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }, item.salesInfo.summary.slice(0, 7).map(function (item, index) {\n          return React.createElement(\"li\", {\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 56\n            },\n            __self: this\n          }, item);\n        })), item.salesInfo.pricing.monthlyPayment ? React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, \"\\xA3\", item.salesInfo.pricing.monthlyPayment, \"/month\") : '', React.createElement(Button, {\n          variant: \"success\",\n          block: true,\n          href: \"https://www.arnoldclark.com\".concat(item.url),\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, \"Find More\")))));\n      })));\n      return React.createElement(\"div\", {\n        className: \"affordable-cars\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, this.state.loading ? React.createElement(\"div\", {\n        className: \"content text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(Loader, {\n        type: \"Oval\",\n        color: \"#2C3637\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      })) : '', !this.state.loading && this.state.sentRequest ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Some affordable Cars\"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      })) : '', !this.state.loading && this.state.sentRequest && this.state.data.searchResults.length < 1 ? React.createElement(\"h4\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"No Results Found.\") : '', !this.state.loading && this.state.sentRequest && this.state.data.searchResults.length > 1 ? carResults : ''));\n    }\n  }]);\n\n  return AffordableCars;\n}(Component);\n\nexport default AffordableCars;","map":{"version":3,"sources":["/Users/naveed.baqai/private/arnold-clark/src/components/interestFreeCars/affordableCars/affordableCars.js"],"names":["React","Component","Button","Loader","monthlyRepayment","searchCarsByMonthlyPayments","missingCarIcon","AffordableCars","props","componentWillReceiveProps","newProps","repayment","price","deposit","years","searchingCar","setState","loading","sentRequest","then","response","data","state","searchResults","filteredCars","filter","item","isReserved","carResults","slice","map","index","photos","length","title","name","salesInfo","summary","pricing","monthlyPayment","url"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button } from 'react-bootstrap';\nimport Loader from 'react-loader-spinner';\nimport { monthlyRepayment } from './../commonFunctions.js';\nimport searchCarsByMonthlyPayments from '../../../services/searchCarsByMonthlyPayments';\nimport missingCarIcon from './../../../assets/car-icon.png';\nimport './affordableCars.scss';\n\nclass AffordableCars extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      sentRequest: false,\n      data: {\n        searchResults: []\n      },\n    };\n   }\n\n  componentWillReceiveProps = (newProps) => {\n    const repayment = monthlyRepayment(newProps.price, newProps.deposit, newProps.years);\n    this.searchingCar(repayment);\n  };\n\n  searchingCar = async (price) => {\n    this.setState({ loading: true, sentRequest: true });\n    try {\n      await searchCarsByMonthlyPayments(price).then((response)=>{\n        this.setState({ data: response });\n        this.setState({ loading: false });\n      });\n    } catch {\n      this.setState({ loading: false });\n    }\n  };\n  \n  render() {\n    const filteredCars = this.state.data.searchResults.filter(item => item.isReserved === false);\n    const carResults = \n      <div className=\"content\">\n        <div className=\"row\">\n          {filteredCars.slice(0, 6).map((item, index) => \n            <div key={index} className=\"col-lg-4\">\n                <div className=\"card\">\n                  {\n                    item.photos.length > 0\n                    ? <img className=\"card-img-top\" src={item.photos[0]} alt=\"Car\"/>\n                    : <img className=\"card-img-top\" src={missingCarIcon} alt=\"Car\"/>\n                  }\n                  <div className=\"card-body\">\n                    <h5 className=\"card-title\">{item.title.name}</h5>\n                    <ul className=\"card-text\">\n                      {\n                        item.salesInfo.summary.slice(0, 7).map((item, index) =>\n                          <li key={index}>{item}</li>\n                        )\n                      }\n                    </ul>\n                    {\n                      item.salesInfo.pricing.monthlyPayment\n                      ? <h4>£{item.salesInfo.pricing.monthlyPayment}/month</h4>\n                      : ''\n                    }\n                    <Button variant=\"success\" block href={`https://www.arnoldclark.com${item.url}`} target=\"_blank\" rel=\"noopener noreferrer\">\n                      <b>Find More</b>\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            )}\n        </div>\n      </div>\n\n    return (\n      <div className=\"affordable-cars\">\n        <div className=\"container\">\n          {\n            this.state.loading\n            ? <div className=\"content text-center\"><Loader type=\"Oval\" color=\"#2C3637\"/></div>\n            : ''\n          }\n          {\n            !this.state.loading \n            && this.state.sentRequest \n            ? <div><h3>Some affordable Cars</h3><hr/></div>\n            : ''\n          }\n          {\n            !this.state.loading \n            && this.state.sentRequest \n            && this.state.data.searchResults.length < 1\n            ? <h4 className=\"text-center\">No Results Found.</h4> \n            : ''\n          }\n          {\n            !this.state.loading \n            && this.state.sentRequest \n            && this.state.data.searchResults.length > 1\n            ? carResults\n            : ''\n          }\n        </div> \n      </div>\n    );\n  }\n}\n\nexport default AffordableCars;\n"]},"metadata":{},"sourceType":"module"}